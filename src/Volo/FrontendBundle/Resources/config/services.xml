<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <imports>
        <import resource="api.xml"/>
    </imports>

    <parameters>
        <parameter key="volo_frontend.security.authenticator.class">Volo\FrontendBundle\Security\ApiAuthenticator</parameter>
        <parameter key="volo_frontend.twig.cms_extension.class">Volo\FrontendBundle\Twig\CmsExtension</parameter>
        <parameter key="doctrine_cache.php_file.class">Volo\FrontendBundle\Service\Provider\TranslatorCache</parameter>
        <parameter key="volo_frontend.service.configuration.class">Volo\FrontendBundle\Service\ConfigurationService</parameter>
        <parameter key="volo_frontend.service.customer.class">Volo\FrontendBundle\Service\CustomerService</parameter>
        <parameter key="volo_frontend.service.cart_manager.class">Volo\FrontendBundle\Service\CartManagerService</parameter>
        <parameter key="volo_frontend.cache_warmer.class">Volo\FrontendBundle\CacheWarmer\VoloCacheWarmer</parameter>
        <parameter key="volo_frontend.twig.serializer_extension.class">Volo\FrontendBundle\Twig\SerializerExtension</parameter>
        <parameter key="volo_frontend.service.customer_location.class">Volo\FrontendBundle\Service\CustomerLocationService</parameter>
    </parameters>

    <services>
        <service id="volo_frontend.security.authenticator" class="%volo_frontend.security.authenticator.class%">
            <argument type="service" id="volo_frontend.provider.customer" />
            <argument type="service" id="volo_frontend.api.authenticator" />
        </service>

        <service id="volo_frontend.service.cart_manager" alias="volo_frontend.provider.cart" />
        <service id="volo_frontend.service.customer_manager" alias="volo_frontend.provider.customer" />
        <service id="volo_frontend.twig.cms_extension" class="%volo_frontend.twig.cms_extension.class%">
            <argument type="service" id="volo_frontend.provider.cms" />
            <tag name="twig.extension" />
        </service>

        <service id="volo_frontend.service.cart_manager" class="%volo_frontend.service.cart_manager.class%">
            <argument type="service" id="doctrine_cache.providers.configuration_cache" />
            <argument type="service" id="volo_frontend.provider.cart" />
        </service>

        <service id="volo_frontend.service.configuration" class="%volo_frontend.service.configuration.class%">
            <argument type="service" id="doctrine_cache.providers.configuration_cache" />
            <argument type="service" id="volo_frontend.provider.configuration" />
            <argument>%volo_frontend.api.configuration.life_time%</argument>
        </service>

        <service id="volo_frontend.cache_warmer" class="%volo_frontend.cache_warmer.class%">
            <argument type="service" id="volo_frontend.service.configuration" />
            <tag name="kernel.cache_warmer" priority="90" />
        </service>

        <service id="volo_frontend.service.customer" class="%volo_frontend.service.customer.class%">
            <argument type="service" id="volo_frontend.provider.customer" />
            <argument type="service" id="volo_frontend.api.serializer"/>
        </service>

        <service id="volo_frontend.twig.serializer_extension" class="%volo_frontend.twig.serializer_extension.class%">
            <argument type="service" id="volo_frontend.api.serializer" />
            <tag name="twig.extension" />
        </service>

        <service id="volo_frontend.service.customer_location" class="%volo_frontend.service.customer_location.class%">
            <argument type="service" id="doctrine_cache.providers.configuration_cache" />
        </service>
    </services>
</container>
