{% extends 'VoloFrontendBundle:Layout:page.html.twig' %}

{% block content_wrapper_class %}menu-bg{% endblock content_wrapper_class %}
{% block bodyClass %}menu-page{% endblock %}

{% block head_scripts %}
    {{ parent() }}
    <script type="text/javascript">
        var VOLO = VOLO || {};
        VOLO.jsonCart={{ cart|json_encode|raw }};

        var foo = function () {
            var VOLO = VOLO || {};
            VOLO.jsonCart={{ cart|json_encode|raw }};

            VOLO.cartModel = new CartModel(VOLO.jsonCart, {
                dataProvider: new CartDataProvider(),
                vendor_id: {{ vendor.id }}
            });

            VOLO.menu = new MenuView({
                el: '.menu__main',
                cartModel: VOLO.cartModel
            });

            VOLO.cartView = new CartView({
                el: '.desktop-cart',
                model: VOLO.cartModel,
                vendor_id: {{ vendor.id }}
            });

            VOLO.cartView.render();
        };

        $(document).on('ready page:load', foo);
        $(document).on('after-remove', function () {
            $(document).off(foo);
        });
    </script>
{% endblock head_scripts %}

{% block content %}
<div class="top-cart">
    <div class="top-cart__info">
        <h3>Restaurant name</h3>
    </div>
    <div class="top-cart__extra-fee">
        Delivery fee added to your final order  <span>5,00 &euro;</span>
    </div>
</div>
<div class="hero-menu">
    <div class="hero-menu__info">
        <div class="hero-menu__info__img">
            <img src="{{ asset('img/restaurant_logos/test.png') }}" alt=""/>
        </div>
        <div class="hero-menu__info__txt">
            <h3>{{ vendor.name }} <span>{{ vendor.description|lower }}</span></h3>
            <p>Closing in 10 min. <span>8:00 AM – 5:00 PM</span>
            </p>
           <p> <i class="icon-pin-map"></i> Alte Schönhauser Str. 46<br/>
            <i class="icon-call-phone"></i> 030 9929 6924</p>
        </div>
    </div>
    {% include 'VoloFrontendBundle:Layout/ImageTag:hero_banner.html.twig' with {'file' : 'img/hero_banners/hero_banner_menu_'} %}
</div>
<div class="menu-wrapper">
    <div class="menu">
        <div class="menu__main" data-vendor_id="{{ vendor.id }}" >
            <div class="menu__main__list">
                <div class="menu__categories">
                    <div class="menu__categories__vertical-spacer"></div>
                    <nav>
                        <ul>
                            {% for menuCategory in vendor.menus.first.getMenuCategories() %}
                                <li>
                                    <a data-id="{{ menuCategory.getId() }}" href="#menu__category-id-{{ menuCategory.getId() }}">
                                        {{ menuCategory.getName() }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </nav>
                </div>
                <div class="menu__items">
                    {% for menuCategory in vendor.menus.first.getMenuCategories() %}
                        <h3 class="menu__items__title" id="menu__category-id-{{ menuCategory.getId() }}">{{ menuCategory.getName() }}</h3>
                        {% for product in menuCategory.getProducts() %}
                            <div class="menu__item" data-object="{{ serialize(product) }}">
                                <div class="menu__item__name">
                                    {{ product.getName() }}<i class="icon-vegetarian"></i>
                                </div>
                                <div class="menu__item__price">
                                    {{ product.getProductVariations().first().getPrice()|number_format }} &euro;
                                    <button class="button button--add menu__item__add">+</button>
                                </div>
                                <div class="menu__item__description">
                                    {{ product.getDescription() }}
                                </div>
                            </div>
                        {% endfor %}
                    {% endfor %}
                    <div class="menu__icon-legend">
                        <span><i class="icon-hot"></i>{{ 'Hot'|trans }}</span>
                        <span><i class="icon-very-hot"></i>{{ 'Very hot'|trans }}</span>
                        <span><i class="icon-vegetarian"></i>{{ 'Vegan'|trans }}</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="desktop-cart">{# cart from template#}</div>
    </div>
    <div class="menu__bottom-info">
        <div class="menu__bottom-info__openings">
            <h3 class="menu__bottom-info__title">Opening hours</h3>
            <ul>
                <li>Mon <span>10:00 AM - 8:00 PM</span></li>
                <li>Tue <span>10:00 AM - 8:00 PM</span></li>
                <li>Wed <span>10:00 AM - 8:00 PM</span></li>
                <li>Thu <span>10:00 AM - 8:00 PM</span></li>
                <li>Fri <span>10:00 AM - 8:00 PM</span></li>
                <li>Sat <span>10:00 AM - 8:00 PM</span></li>
                <li>Sun <span>10:00 AM - 8:00 PM</span></li>
            </ul>
        </div>
        <div class="menu__bottom-info__seo">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium alias aut dolorem earum fugit ipsa maxime modi nam officia optio, pariatur perferendis porro quae quaerat reiciendis, saepe sed totam, voluptates.  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium alias aut dolorem earum fugit ipsa maxime modi nam officia optio, pariatur perferendis porro quae quaerat reiciendis, saepe sed totam, voluptates.
        </div>
    </div>
    <div class="clearfix"></div>
</div>
<div class="bottom-cart">
    <div class="bottom-cart__wrapper">
        <div class="bottom-cart__quantity"><span>23</span></div>
        <div class="bottom-cart__cta">{{ 'View this cart'|trans }}</div>
        <div class="bottom-cart__price">131,50 &euro;</div>
    </div>
</div>

{{ include('VoloFrontendBundle:Layout/Partial/templates:cart.html.twig') }}

{% endblock %}
