{% extends 'VoloFrontendBundle:Layout:page.html.twig' %}

{% block content_wrapper_class %}menu-bg{% endblock content_wrapper_class %}
{% block bodyClass %}menu-page{% endblock %}

{% block footer_scripts %}
    {{ parent() }}

    <script data-turbolinks-eval=always>
        var VOLO = VOLO || {};
        VOLO.jsonCart = {{ cart|json_encode|raw }};
    </script>

    <script data-turbolinks-eval=false>
        $(document).ready(function () {
            var cartModel = VOLO.initCartModel(VOLO.jsonCart);
            VOLO.initCartViews(cartModel);
            if (_.isObject(window.Intl)) {
                try {
                    new Intl.NumberFormat(VOLO.configuration.locale.replace('_', '-'));
                    VOLO.cartView.render();
                } catch (err) {
                }
            }
        });
    </script>
{% endblock %}

{% block content %}
<div class="top-cart">
    <div class="top-cart__info">
        <h3>Restaurant name</h3>
    </div>
    <div class="top-cart__extra-fee">
        Delivery fee added to your final order  <span>{{ "5.00"|price }}</span>
    </div>
</div>
<div class="hero-banner-wrapper">
    <div class="hero-menu__title"><h2>{{ vendor.name }}</h2></div>
    <div class="hero-menu__info">
        <h2>{{ vendor.name }} <span>{{ vendor.description|lower }}</span></h2>
        <p>Closing in 10 min. <span>8:00 AM – 5:00 PM</span></p>
    </div>
    <div class="hero-menu__info-extra">
        <i class="icon-pin-map"></i> Alte Schönhauser Str. 46
        <i class="icon-call-phone"></i> 030 9929 6924
    </div>
    {% include 'VoloFrontendBundle:Layout/ImageTag:thumbor_image.html.twig' with {type: 'hero', 'vendorCode' : vendor.code} %}
</div>
<div class="menu-wrapper">
    <div class="menu">
        <div class="menu__main" data-vendor_id="{{ vendor.id }}" >
            <div class="menu__main__list">
                <div class="menu__categories">
                    <div class="menu__vendor-logo">
                        <img src="{{ asset('img/restaurant_logos/test.png') }}" alt=""/>
                    </div>
                    <nav>
                        <ul>
                            {% for menuCategory in vendor.menus.first.menuCategories %}
                                <li>
                                    <a class="anchorNavigation" data-id="{{ menuCategory.id }}" href="#menu__category-id-{{ menuCategory.id }}">
                                        {{ menuCategory.name }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    </nav>
                </div>
                <div class="menu__items">
                    {% for menuCategory in vendor.menus.first.menuCategories %}
                        <h3 class="menu__items__title" id="menu__category-id-{{ menuCategory.id }}">{{ menuCategory.name }}</h3>
                        {% for product in menuCategory.products %}
                            <div class="menu__item" data-object='{{ serialize(product)|raw }}'>
                                <div class="menu__item__name">
                                    {{ product.name }}<i class="icon-vegetarian"></i>
                                </div>
                                <div class="menu__item__description">
                                    {{ product.description }}
                                </div>
                                <div class="menu__item__price">
                                    {{ product.productVariations.first.price|price }}
                                    <button class="menu__item__add"><i class="icon-plus"></i></button>
                                </div>
                            </div>
                        {% endfor %}
                    {% endfor %}
                    <div class="menu__icon-legend">
                        <span><i class="icon-hot"></i>{{ 'Hot'|trans }}</span>
                        <span><i class="icon-very-hot"></i>{{ 'Very hot'|trans }}</span>
                        <span><i class="icon-vegetarian"></i>{{ 'Vegan'|trans }}</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="desktop-cart" data-vendor_id="{{ vendor.id }}">{# cart from template#}</div>
    </div>
    <div class="menu__bottom-info">
        <div class="menu__bottom-info__openings">
            <h3 class="menu__bottom-info__title">Opening hours</h3>
            <ul>
                <li>Mon <span>10:00 AM - 8:00 PM</span></li>
                <li>Tue <span>10:00 AM - 8:00 PM</span></li>
                <li>Wed <span>10:00 AM - 8:00 PM</span></li>
                <li>Thu <span>10:00 AM - 8:00 PM</span></li>
                <li>Fri <span>10:00 AM - 8:00 PM</span></li>
                <li>Sat <span>10:00 AM - 8:00 PM</span></li>
                <li>Sun <span>10:00 AM - 8:00 PM</span></li>
            </ul>
        </div>
        <div class="menu__bottom-info__seo">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium alias aut dolorem earum fugit ipsa maxime modi nam officia optio, pariatur perferendis porro quae quaerat reiciendis, saepe sed totam, voluptates.  Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusantium alias aut dolorem earum fugit ipsa maxime modi nam officia optio, pariatur perferendis porro quae quaerat reiciendis, saepe sed totam, voluptates.
        </div>
    </div>
    <div class="clearfix"></div>
</div>
<div class="bottom-cart">
    <div class="bottom-cart__wrapper">
        <div class="bottom-cart__quantity"><span>23</span></div>
        <div class="bottom-cart__cta">{{ 'View this cart'|trans }}</div>
        <div class="bottom-cart__price">{{ "131.50"|price }}</div>
    </div>
</div>

{{ include('VoloFrontendBundle:Layout/Partial/templates:cart.html.twig') }}

{% endblock %}
